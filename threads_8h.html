<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ap-Paralelo: threads.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Ap-Paralelo
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('threads_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">threads.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;gd.h&quot;</code><br />
<code>#include &quot;<a class="el" href="image-lib_8h_source.html">image-lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="comunication_8h_source.html">comunication.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="image__handler_8h_source.html">image_handler.h</a>&quot;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
</div>
<p><a href="threads_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structthread__input.html">thread_input</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a struct that contains the input information used by the threads.  <a href="structthread__input.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:aa2fff25a059ffdf5cba84f841a5d6632"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structthread__input.html">thread_input</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="threads_8h.html#aa2fff25a059ffdf5cba84f841a5d6632">thread_input</a></td></tr>
<tr class="separator:aa2fff25a059ffdf5cba84f841a5d6632"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af4c3769f8aca41f089fb24448f928493"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structthread__input.html">thread_input</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="threads_8h.html#af4c3769f8aca41f089fb24448f928493">create_watermark_input</a> (int is_start, int is_end, int pipeline_id, char *watermark, <a class="el" href="comunication_8h.html#a49022869b202f4f3cac8541a19f6de8f">pipe_ptr</a> input_pipe, <a class="el" href="comunication_8h.html#a49022869b202f4f3cac8541a19f6de8f">pipe_ptr</a> output_pipe, char *directory, char *input_directory)</td></tr>
<tr class="separator:af4c3769f8aca41f089fb24448f928493"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f4b4b24e6712791747f0fefc3f441d0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structthread__input.html">thread_input</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="threads_8h.html#a1f4b4b24e6712791747f0fefc3f441d0">create_resize_input</a> (int is_start, int is_end, int pipeline_id, int resize_width, <a class="el" href="comunication_8h.html#a49022869b202f4f3cac8541a19f6de8f">pipe_ptr</a> input_pipe, <a class="el" href="comunication_8h.html#a49022869b202f4f3cac8541a19f6de8f">pipe_ptr</a> output_pipe, char *directory)</td></tr>
<tr class="separator:a1f4b4b24e6712791747f0fefc3f441d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b9aa2d9aa74639a0a5ee490106542bd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structthread__input.html">thread_input</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="threads_8h.html#a6b9aa2d9aa74639a0a5ee490106542bd">create_thumbnail_input</a> (int is_start, int is_end, int pipeline_id, int thumbnail_size, <a class="el" href="comunication_8h.html#a49022869b202f4f3cac8541a19f6de8f">pipe_ptr</a> input_pipe, <a class="el" href="comunication_8h.html#a49022869b202f4f3cac8541a19f6de8f">pipe_ptr</a> output_pipe, char *directory)</td></tr>
<tr class="separator:a6b9aa2d9aa74639a0a5ee490106542bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57f571d70f0fb597072279af9723d721"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="threads_8h.html#a57f571d70f0fb597072279af9723d721">pipeline_thread</a> (void *arg)</td></tr>
<tr class="separator:a57f571d70f0fb597072279af9723d721"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a0abaf4b5d42c4e5d19190035fade3599"><td class="memItemLeft" align="right" valign="top">pthread_mutex_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="threads_8h.html#a0abaf4b5d42c4e5d19190035fade3599">lock</a></td></tr>
<tr class="memdesc:a0abaf4b5d42c4e5d19190035fade3599"><td class="mdescLeft">&#160;</td><td class="mdescRight">a external reference to a mutex lock used to make sure only a single thread reads the next name in the image-list.txt at a given time.  <br /></td></tr>
<tr class="separator:a0abaf4b5d42c4e5d19190035fade3599"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This is the header file of <a class="el" href="threads_8c.html">threads.c</a>. </p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="aa2fff25a059ffdf5cba84f841a5d6632" name="aa2fff25a059ffdf5cba84f841a5d6632"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2fff25a059ffdf5cba84f841a5d6632">&#9670;&#160;</a></span>thread_input</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structthread__input.html">thread_input</a> <a class="el" href="structthread__input.html">thread_input</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a1f4b4b24e6712791747f0fefc3f441d0" name="a1f4b4b24e6712791747f0fefc3f441d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f4b4b24e6712791747f0fefc3f441d0">&#9670;&#160;</a></span>create_resize_input()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structthread__input.html">thread_input</a> create_resize_input </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>is_start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>is_end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pipeline_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>resize_width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="comunication_8h.html#a49022869b202f4f3cac8541a19f6de8f">pipe_ptr</a>&#160;</td>
          <td class="paramname"><em>input_pipe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="comunication_8h.html#a49022869b202f4f3cac8541a19f6de8f">pipe_ptr</a>&#160;</td>
          <td class="paramname"><em>output_pipe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>directory</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates input instructions for a resize thread </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">is_start</td><td>- integer to signal if is start of pipeline </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">is_end</td><td>- integer to signal if is end of pipeline </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pipeline_id</td><td>- id of the pipeline </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">resize_width</td><td>- width to use in resizing </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">input_pipe</td><td>- pointer to the input pipe </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">out_pipe</td><td>- pointer to the output pipe </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">directory</td><td>- string of the directory of the output </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">input</td><td>- struct of type <a class="el" href="structthread__input.html" title="This is a struct that contains the input information used by the threads.">thread_input</a>, with the resize predefinition </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6b9aa2d9aa74639a0a5ee490106542bd" name="a6b9aa2d9aa74639a0a5ee490106542bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b9aa2d9aa74639a0a5ee490106542bd">&#9670;&#160;</a></span>create_thumbnail_input()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structthread__input.html">thread_input</a> create_thumbnail_input </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>is_start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>is_end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pipeline_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>thumbnail_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="comunication_8h.html#a49022869b202f4f3cac8541a19f6de8f">pipe_ptr</a>&#160;</td>
          <td class="paramname"><em>input_pipe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="comunication_8h.html#a49022869b202f4f3cac8541a19f6de8f">pipe_ptr</a>&#160;</td>
          <td class="paramname"><em>output_pipe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>directory</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates input instructions for a thumbnail thread </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">is_start</td><td>- integer to signal if is start of pipeline </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">is_end</td><td>- integer to signal if is end of pipeline </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pipeline_id</td><td>- id of the pipeline </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">thumbnail_size</td><td>- target size for thumbnail </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">input_pipe</td><td>- pointer to the input pipe </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">out_pipe</td><td>- pointer to the output pipe </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">directory</td><td>- string of the directory of the output </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">input</td><td>- struct of type <a class="el" href="structthread__input.html" title="This is a struct that contains the input information used by the threads.">thread_input</a>, with the thumbnail predefinition </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af4c3769f8aca41f089fb24448f928493" name="af4c3769f8aca41f089fb24448f928493"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4c3769f8aca41f089fb24448f928493">&#9670;&#160;</a></span>create_watermark_input()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structthread__input.html">thread_input</a> create_watermark_input </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>is_start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>is_end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pipeline_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>watermark</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="comunication_8h.html#a49022869b202f4f3cac8541a19f6de8f">pipe_ptr</a>&#160;</td>
          <td class="paramname"><em>input_pipe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="comunication_8h.html#a49022869b202f4f3cac8541a19f6de8f">pipe_ptr</a>&#160;</td>
          <td class="paramname"><em>output_pipe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>directory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>input_directory</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates input instructions for a watermark thread </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">is_start</td><td>- integer to signal if is start of pipeline </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">is_end</td><td>- integer to signal if is end of pipeline </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pipeline_id</td><td>- id of the pipeline </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">watermark</td><td>- string of the name of the watermark image </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">input_pipe</td><td>- pointer to the input pipe </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">out_pipe</td><td>- pointer to the output pipe </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">directory</td><td>- string of the directory of the output </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">input_directory</td><td>- string of the directory of the input </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">input</td><td>- struct of type <a class="el" href="structthread__input.html" title="This is a struct that contains the input information used by the threads.">thread_input</a>, with the watermark predefinition </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Side Effects:<ul>
<li>reads the watermark image from the file specified by the watermark string. </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a57f571d70f0fb597072279af9723d721" name="a57f571d70f0fb597072279af9723d721"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57f571d70f0fb597072279af9723d721">&#9670;&#160;</a></span>pipeline_thread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * pipeline_thread </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The method is in charge of running the thread. It starts by recieving a message from the input pipe. It then checks if the message is the last one, and if it is, it sends it to the output pipe and breaks the loop. If not, it applies the functionality specified by the input to the message and sends it to the output pipe. After completing the loop, thread then cleans the data and closes the pipes. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">arg</td><td>- pointer to the input struct of type <a class="el" href="structthread__input.html" title="This is a struct that contains the input information used by the threads.">thread_input</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a0abaf4b5d42c4e5d19190035fade3599" name="a0abaf4b5d42c4e5d19190035fade3599"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0abaf4b5d42c4e5d19190035fade3599">&#9670;&#160;</a></span>lock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pthread_mutex_t lock</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>a external reference to a mutex lock used to make sure only a single thread reads the next name in the image-list.txt at a given time. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="threads_8h.html">threads.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7 </li>
  </ul>
</div>
</body>
</html>
